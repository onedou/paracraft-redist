<html>
    <body>
        <pe:mcml>
            <script type="text/npl">
                <![CDATA[
                    -- UI
                    local Panorama = NPL.load('./Panorama.lua')

                    local page = document:GetPageCtrl()

                    function close()
                        page:CloseWindow()
                    end

                    function share()
                        close()
                        Panorama:ShowShare()
                    end

                    function retry()
                        close()
                        Panorama:ShowCreate(true)
                    end

                    function get_share_url()
                        return Panorama.shareUrl
                    end
                ]]>
            </script>
            <kp:window width="500" height="653" onclose="close()">
                <div style="width: 500px;height: 40px;">
                    <!-- title -->
                    <div style="margin-top: 8px;margin-left: 12px;width: 159px;height: 24px;background: url(Texture/Aries/Creator/keepwork/worldshare_32bits.png#575 363 159 24);"></div>
                </div>
                <div>
                    <div style="float: left;margin-left: 10px;margin-top: 8px;width: 274px;height: 593px;">
                        <pe:nplbrowser
                            name="panorama_preview"
                            enabledResize="true"
                            width="274"
                            height="593"
                            url="<%= get_share_url() %>"
                            style="background:url()"
                        />
                    </div>
                    <div style="float: left;width: 216px;height: 200px;">
                        <div style="width: 197px;height: 55px;margin-left: 10px;margin-top: 30px;background: url(Texture/Aries/Creator/keepwork/worldshare_32bits.png#673 198 38 64:12 10 12 15);font-size: 18px;text-align: center;padding: 0;padding-top: 12px;">
                            <input type="button" style="position: relative;width: 200px;height: 60px;background: url()"  value="" onclick="share()"/>
                            <%= L'分享' %>
                        </div>
                        <div style="width: 197px;height: 55px;margin-left: 10px;margin-top: 10px;background: url(Texture/Aries/Creator/keepwork/worldshare_32bits.png#624 198 38 64:12 10 12 15);font-size: 18px;text-align: center;padding: 0;padding-top: 12px;">
                            <input type="button" style="position: relative;width: 200px;height: 60px;background: url()" value="" onclick="retry()"/>
                            <%= L'重新拍摄' %>
                        </div>
                    </div>
                    <!-- body -->
                </div>
            </kp:window>
        </pe:mcml>
    </body>
</html>