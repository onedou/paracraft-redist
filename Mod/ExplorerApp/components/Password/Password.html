<html>
<body>
<pe:mcml>
    <script refresh="false" type="text/npl" src="Password.lua">
        Password = NPL.load('./Password.lua')
        Utils = NPL.load('(gl)Mod/WorldShare/helper/Utils.lua')

        Password:SetPage()

        function get_window_style()
            return Utils.FixCenter(290, 250)
        end

        function close()
            Password:ClosePage()
        end

        function confirm()
            Password:Confirm()
        end

        function update_view_password()
            Password:UpdateViewPassword()
        end

        function is_show_star(index)
            if #Password.password >= index then
                return true
            else
                return false
            end
        end

        function focus()
            Password:FocusPassword()
        end
    </script>
    <style type="text/mcss">
        {
            area = {
                padding = 20
            },
            enter = {
                width = 230,
                height = 120,
                ['padding-top'] = 25,
                ['padding-left'] = 20
            },
            password = {
                float = 'left',
                width = 43,
                height = 43,
                ['margin-right'] = 10,
                color = '#ffffff',
                background = 'textures/explorer_32bits.png#60 131 17 16:3 3 3 3'
            },
            password_input = {
                position = 'relative',
                width = 212,
                height = 43,
                background = ''
            },
            password_star = {
                ['padding-left'] = 17,
                ['padding-top'] = 12,
                color = "#ffffff"
            },
            confirm = {
                position = 'relative',
                align = 'center',
                ['margin-top'] = 10,
                width = 78,
                height = 35
            }
        }
    </style>
    <div width="100%" height="100%">
        <aries:window
        class="default"
        mode="thin"
        width="290"
        height="250"
        style="<%=get_window_style()%>"
        title='<%=L"设置密码" %>'
        onclose="close()">
            <div class="area">
                <div class="enter">
                    <div onclick="focus()">
                        <input name="password" class="password_input" onkeyup="update_view_password" type="text" value=""/>
                        <pe:container style="margin-top: -44px;background:''">
                            <div class="password">
                                <pe:if condition="<%=is_show_star(1)%>">
                                    <div class="password_star">*</div>
                                </pe:if>
                            </div>
                            <div class="password">
                                <pe:if condition="<%=is_show_star(2)%>">
                                    <div class="password_star">*</div>
                                </pe:if>
                            </div>
                            <div class="password">
                                <pe:if condition="<%=is_show_star(3)%>">
                                    <div class="password_star">*</div>
                                </pe:if>
                            </div>
                            <div class="password">
                                <pe:if condition="<%=is_show_star(4)%>">
                                    <div class="password_star">*</div>
                                </pe:if>
                            </div>
                        </pe:container>
                    </div>
                    <div style="width: 202px">
                        <input type="button" enable_ime="false" class="confirm mc_light_grey_button_with_fillet" value="确定" onclick="confirm()" />
                    </div>
                </div>
                <div>
                    <div style="font-weight:bold;font-size:14px;base-font-size:14px;">温馨提示</div>
                    <div>
                        您在设置金币使用数量需要使用该密码，请妥善保管。
                    </div>
                </div>
            </div>
        </aries:window>
    </div>
</pe:mcml>
</body>
</html>